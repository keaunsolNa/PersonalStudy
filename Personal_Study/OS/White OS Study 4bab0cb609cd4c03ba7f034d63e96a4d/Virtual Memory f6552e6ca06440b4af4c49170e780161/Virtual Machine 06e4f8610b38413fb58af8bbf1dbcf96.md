# Virtual Machine

![Untitled](Virtual%20Machine%2006e4f8610b38413fb58af8bbf1dbcf96/Untitled.png)

![Untitled](Virtual%20Machine%2006e4f8610b38413fb58af8bbf1dbcf96/Untitled%201.png)

# 정의

- 하드웨어를 에뮬레이션 하여 여러 개의 독립적인 가상 환경을 생성하는 소프트웨어
- 하나 이상의 가상 게스트 시스템이 물리적 호스트 시스템에서 실행된다.
- 가상 머신은 시스템의 나머지 부분과 분리되어 있으므로 가상 머신 내부의 소프트웨어는 호스트 컴퓨터를 조작할 수 없다.
- VM은 물리적 컴퓨터에서 실행하는 모든 소프트웨어를 실행하는 데 사용할 수 있는 소프트웨어 컴퓨터로 생각할 수 있다. 물리적 기계와 마찬가지로 가상 머신에는 자체 운영체제, 스토리지, 네트워킹, 구성 설정 및 소프트웨어가 포함되어 있으며 해당 호스트에서 실행되는 다른 VM과 완전히 분리된다.
- 가상 머신은 물리적 머신의 OS에서 다른 애플리케이션과 마찬가지로 애플리케이션 창에서 프로세스로 실행된다. 가상 머신의 주요 구성 파일로는 로그 파일, NVRAM 설정 파일, 가상 디스크 파일, 구성 파일 등이 있다.
- 가상 머신은 관리 및 유지가 쉽고 물리적 머신에 비해 여러 장점을 제공한다
    - 가상 머신은 단일 물리적 컴퓨터에서 여러 OS 체제 환경을 실행할 수 있어 물리적 공간, 시간 및 관리 비용을 절약할 수 있다
    - 가상 머신은 레거시 애플리케이션을 지원하므로 새 OS로 마이그레이션하는 데 드는 비용을 줄여준다.
    - VM은 통합 재해 복구 및 애플리케이션 프로비저닝 옵션도 제공할 수 있다.
    - 애플리케이션을 쉽게 확장하고 변동하는 워크로드를 수용할 수 있다.
    - 잠재적인 위협에 대해 추가 보안 계층을 제공할 수 있다.
- 가상 머신은 몇 가지 잠재적인 단점 역시 존재한다
    - 하나의 물리적 시스템에서 여러 가상 시스템을 실행할 경우 인프라 요구 사항에 따라 성능이 불안정해질 수 있다
    - 가상 머신은 전체 물리적 컴퓨터보다 효율성이 낮고 느리게 실행된다.
- 가상 머신은 프로세스 가상 머신과 시스템 가상 머신의 두 가지 유형이 존재한다
    
    # 프로세스 가상 머신
    
    - 애플리케이션 가상 머신 또는 MRE(Managed Runtime Environment)라고도 한다. 호스트 OS 내에서 일반 애플리케이션으로 실행되며 단일 프로세스를 지원한다.
        - 해당 프로세스가 시작될 때 생성되며 종료될 때 삭제된다.
        - 목적은 기본 하드웨어 또는 OS의 세부 정보를 추상화하고 프로그램이 모든 플랫폼에서 동일한 방식으로 실행될 수 있도록 하는 플랫폼 독립적인 프로그래밍 환경을 제공하는 것에 있다.
    - 단일 프로세스가 호스트 머신에서 애플리케이션으로 실행되어 기본 하드웨어 또는 OS의 정보를 마스킹하여 플랫폼 독립적인 프로그래밍 환경을 제공할 수 있다.
    - 프로세스 가상 머신은 인터프리터를 사용하여 구현된다.
    - JVM이 프로세스 가상 머신의 대표적인 예시라 할 수 있다
    
    # 시스템 가상 머신
    
    - 물리적 머신을 대체하기 위해 완전히 가상화 된 모델이다. 전체 가상화 VM이라고도 한다.
    - 전체 OS를 실행하는 데 필요한 기능을 제공한다.
    - 시스템 플랫폼은 각각 자체 OS 복사본을 실행하는 여러 가상 머신 간에 호스트 컴퓨터의 물리적 리소스 공유를 지원한다
        - 호스트는 여러 게스트를 에뮬레이트할 수 있으며, 각 게스트는 서로 다른 OS와 하드웨어 플랫폼을 에뮬레이트할 수 있다.
    - 시스템 가상 머신은 베어 하드웨어 또는 OS 위에서 실행될 수 있는 하이버파이저에 의존한다.
        - 하이퍼바이저는 기본 실행을 사용하여 하드웨어를 공유하고 관리하므로 서로 격리되어 있으면서도 동일한 물리적 시스템에 존재하는 여러 환경을 허용한다.

# 작동 방식

- 가상 머신은 기본 호스트 시스템이나 해당 호스트의 다른 가상 머신과 독립적으로 자체 OS 및 애플리케이션을 실행하기 위한 격리된 환경을 제공한다.
- 단일 컴퓨터는 서로 영향을 주거나 방해하지 않고 서로 다른 OS 및 애플리케이션을 실행하는 여러 VM을 호스팅할 수 있다.
- 가상 머신은 여전히 호스트의 물리적 리소스에 의존하지만 해당 리소스는 가상화되어 가상 머신 전체에 분산되며 필요에 따라 다시 할당될 수 있다. 이를 통해 다양한 환경을 동시에 실행하고 변동하는 워크로드를 수용할 수 있다.
- 사용자 관점에서 가상 머신은 베어메탈 머신처럼 작동한다. 대부분의 경우 가상 머신에 연결하는 사용자는 자신이 가상 환경을 사용하고 있음을 인식하지 못 한다
- 사용자는 필요에 따라 게스트 OS와 해당 애플리케이션을 구성 및 업데이트하고 호스트나 다른 VM에 영향을 주지 않고 새 애플리케이션을 설치하거나 제거할 수 있다.

# 구성 요소 및 특징

- 하드웨어 애뮬레이션
    - 가상 머신은 하드웨어를 에뮬레이션하여 물리적인 하드웨어에서 실행되는 것처럼 동작할 수 있다
- Hypervisor
    - 가상 머신을 관리하고 제어하기 위해 소프트웨어 레이어인 Hypervisor가 사용된다. Hyperviosr는 호스트 시스템에서 여러 개의 가상 머신을 실행하고, 각각의 가상 머신이 물리적인 리소스에 접근할 수 있도록 조정한다
- 게스트 OS
    - 가상 머신 내에서 실행되는 OS로 일반적으로 호스트 시스템과는 독립적으로 작동하며, 각각의 가상 머신은 자체 파일 시스템 및 응용 프로그램을 가질 수 있다
- 스냅샷 및 복제
    - 스냅샷을 사용하여 현재 상태를 저장하고 나중에 해당 상태로 쉽게 복원할 수 있다.
    - 가상 머신을 복제하여 새로운 가상 머신을 빠르게 생성하거나 동일한 환경을 여러 개 만들 수 있다
- 이식성
    - 가상 머신은 하드웨어와 독립적으로 실행되므로, 한 플랫폼에서 다른 플랫폼으로 쉽게 이동하거나 배포할 수 있다.