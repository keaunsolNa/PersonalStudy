# 다재다능 코틀린 프로그래밍

# Kotlin 시작하기

- 코틀린의 특징
    - Java와 형태는 다르지만, 의미로는 유사한 문법 체계
    - 클래스로부터의 상속 없이 클래스에 도메인 특화 편의 메소드(domain-specific convenience method)를 추가할 수 있다. 이런 메소드들은 확장 함수(extension function)라고 불리며, 오리지널 클래스의 메소드처럼 사용될 수 있다. 이런 특징은 통합 개발 환경(IDE)의 완벽한 지원을 받는다.
    - 델리케이션(delegation, 위임)은 코드를 재사용할때 상속보다 더 좋은 디자인을 할 수 있도록 도와준다. Groovy와 Ruby로부터 영감을 받은 코틀린은 메소드 호출을 한 객체에서 다른 객체로 델리케이션할때 타입 안정적으로 사용할 수 있다.
    - if-else문을 중첩하는 대신 아규먼트 매칭(argument-matching, 인자 매칭) 문법을 사용할 수 있다. Erlang이나 Scala의 문법과 유사하다
    - 이미 존재하는 함수를 확장할 수 있다. 단, 바이너리 코드가 양립할 수 없기에 컴파일을 다시 해야 할 필요는 있다.
    - Groovy, Scala, Ruby 등에서 지원하는 명시적 인자(Named argument)는 코드의 표현력을 강화시켜 코드를 읽기 쉽게 만들고, 에러를 줄일 수 있게 해준다.
    - 작성한 클래스나 서드파티 클래스에서 연산자 오버로딩이 가능하다.
    - 내부 DSL 생성이 가능하다. Groovy, Ruby와 유사하지만 정적 타입체크를 완벽히 지원한다.
    - C 스타일의 프로시저를 사용할 수 있고, Scala 스타일의 스크립트, Java같은 객체지향 코드, Smalltalk/Erlang과 같은 함수형 스타일의 코드도 사용할 수 있다.
    - 코틀린은 코루틴(Coroutine)과 컨티뉴에이션(Continuation)으로 비동기 프로그래밍 영역에서 혁신을 이끌고 있다.
- 코트린을 사랑할 수 밖에 없는 이유
    - 다양한 프로그래밍 패러다임
        - 코틀린은 비동기 프로그래밍, 함수형 프로그래밍, 객체지향 프로그래밍, 스크립트 등 다양한 프로그래밍 패러다임을 제공한다.
        - JavaScript나 C같은 절차지향 코드를 사용할 수 있다. 그리고 그 코드를 컴파일 없이 스크립트처럼 사용할 수 있다. 동시에 정적 타입 언어에서 제공하는 탁월한 타입 안정성도 제공받는다.
        - 코틀린에서도 Java처럼 클래스를 만들 수도 있고, 객체지향으로 코드를 만들 수도 있다. 하지만 코틀린에서는 보일러플레이트 코드가 필요 없다.
        - 코틀린의 클래스는 파이널(final)을 기본값으로 가지고 있다. 만약 클래스를 베이스클래스로서 사용하고 싶다면 해당 클래스에 명시적으로 표시해야만 한다. 델리게이션은 언어 수준의 문법을 가지고 있으므로 상속과 델리게이션 사이에서 신중한 선택을 거쳐 사용할 수 있다.
        - 코틀린은 명령형과 함수형 프로그래밍을 모두 지원하기 때문에 다른 언어에서 지원해 주던 함수형의 장점을 즉시 사용할 수 있다.
        - 코틀린의 문법을 이용해서 내부 도메인 특화 언어(DSL, Domain Specific Languages)를 바로 만들 수 있다.
        - JDK를 사용하면 동시성(Concurrency) 프로그래밍이 가능하며 코루틴을 사용한 비동기 프로그래밍 또한 가능하다.
    - 타입추론으로 사용하는 정적 타입
        - 정적 타입 언어는 컴파일 시간에서 타입 안정성을 제공한다. 그러나 코틀린은 다른 정적 타입 언어들보다 몇 발자국 더 나아가서 오류를 방지한다. 예시로, 코틀린 타입시스템은 널 불가(non-nullable) 타입과 널 가능(nullable)타입을 구분한다. 동시에 타입이 100% 명확하지 않은 경우 코틀린은 개발자에게 타입을 명시할 것을 요청한다.
    - 풀스택 개발을 위한 하나의 언어
        - Kotlinc-jvm은 코틀린 코드를 가상 머신에서 실행시키기 위해서 바이트 코드로 컴파일한다. 코틀린은 서버사이드 코드, 안드로이드 애플리케이션 개발에도 사용이 가능하며 특정 버전의 가상머신을 위한 배포도 가능하다.
        - 코틀린은 자바스크립트로 트랜스파일(transpile)된다. 코틀린으로 코드를 작성하고 JavaScript로 트랜스파일하면 Node.js 서버에서 사용할 수 있고, 웹 브라우저에서 프론트앤드용으로 사용할 수 있다.
        - 코틀린 네이티브를 사용하면 원하는 플랫폼과 브라우저에서 동작하는 웹 어셈블리 바이너리 코드로 컴파일을 할 수도 있다.
    - 자연스럽고 우아함
        - 코틀린은 필드(field), 접근자 메소드(getter, setter), Java Bean 컨벤션에서 제시하는 필수적인 요소들을 통합했다.
        - 코틀린은 세미콜론(;)이 선택사항이다.
        - 코틀린은 infix 어노테이션을 제공한다. infix 어노테이션은 온점(.)과 중괄호({ })를 선택사항으로 만들어준다.
            
            ```kotlin
            operate robot {
            	turn left
            	turn right
            	move forward
            }
            ```
            
- 왜 코틀린을 선택해야 하는가?
    - 코틀린은 “더 적은 것이 낫다(less is more)” 철학으로 보일러플레이트 코드를 덜 쓰도록 해준다. 이는 관리해야 할 코드는 줄어들고, 결과물에서 처리해야 할 오류가 적어진다.
    - 코틀린은 명령형 프로그래밍과 함수형 프로그래밍을 섞어서 쓸 수 있게 해준다. 현재 직면한 문제에 가장 적합한 방법을 적용할 수 있고, 한 가지 방식으로 코딩을 한 후 나중에 원하는 방식으로 리팩토링할 수 있다. 우선 동작하게 만들고, 나중에 빠르게 개선할 수 있다.
    - 코틀린은 다른 정적 타입 언어들과 비교했을 때 훨씬 많은 컴파일 시간 안정성(compile-time safety)을 제공한다.
    - 코틀린의 코루틴은 다른 JDK에서 사용 가능한 언어들에 비해서 비동기 프로그래밍을 쉽게 만들 뿐만 아니라 높은 성능을 제공한다.
    - 프로젝트에서 코틀린 코드와 Java 코드를 함께 사용할 수 있다. 프로젝트에 코틀린 도입 시 점진적으로 도입할 수 있다.
    - 코틀린을 사용하면 풍부한 DSL을 사용할 수 있다.
    - 코틀린을 사용하면 시스템에서 중복을 줄일 수 있다. 예를 들면 유저의 입력값에 대한 유효성 검사가 동일하다면 백엔드에서 Java로 컴파일되고, 프론트엔드에서는 JavaScript로 트랜스파일되고, 안드로이드나 iOS, 브라우저에서 돌아가는 웹 어셈블리 같은 플랫폼을 위해선 해당 바이너리로 컴파일될 수 있다.
    - 코틀린은 안드로이드 공식 언어이다.
- 코틀린 사용하기
    - 코틀린은 Java와는 다르게 모든 코드를 컴파일 할 필요가 없다. 코드 그 자체로 실행할 수 있다. 원한다면 소스 코드를 파일 안에서 바로 시작할 수도, 클래스파일을 만들고 다른 클래스나 코틀린 파일을 사용하기 위해서 바이너리를 재사용할 수도 있다. 또한 코드를 작성하는 도중에 코틀린 쉘을 실행시켜서 코드 스니펫의 동작을 확인해 볼 수도 있다.
    - 코드를 JVM에서 실행시킬 수도, Node.js나 브라우저의 JavaScript 엔진에서 실행시킬 수도, 안드로이드 디바이스에서 실행시킬 수도, iOS나 웹 어셈블리에서 실행시킬 수도 있다.
- 바이트코드로 컴파일하고 실행하기
    - 텍스트 편집기에서 Hello.kt 이름으로 코틀린 파일을 작성한다.
        
        ```kotlin
        fun main() = println("Hello World")
        ```
        
    - 커맨드 라인에서 코드를 컴파일하고 실행시키기 위해서, 먼저 아래의 명령어를 통해 컴파일을 해야 한다.
        
        ```bash
        $ kotlin-jvm Hello.kt -d Hello.jar
        ```
        
    - 이 명령어를 통해 Hello.kt 파일에 있는 코드를 Java 바이트코드로 컴파일시키고 Hello.jar 파일을 만들어 넣어두게 된다. jar 파일이 만들어지면 Java 툴을 이용해 프로그램을 실행시킬 수 있다.
        
        ```bash
        $ java -classpath Hello.jar HelloKt
        ```
        
    - Hello.kt는 main함수만을 가지고 있고 클래스가 아니기에 코틀린 컴파일러가 자동으로 확장자를 제거한 파일 이름을 가지고 Kt라는 접미사를 추가한 클래스 이름을 만든다. 실행 결과는 아래와 같다.
        
        ```bash
        Hello World
        ```
        
    - classpath 커맨드 라인 옵션을 열거하는 대신, jar 옵션으로 코드를 실행시킬 수 있다. 왜냐하면 main() 함수를 찾을 때 코틀린 컴파일러가 jar 파일에 Main-Class 매니페스트 어트리뷰트를 추가했기 때문이다.
        
        ```bash
        $ java -jar Hello.jar
        ```
        
    - 코틀린 스탠다드 라이브러리에 있는 클래스와 함수를 사용할 때 java 툴만 사용해서 실행한다면 java.lang.NoClassDefFoundError 예외와 함께 실패하게 된다. 이를 방지하기 위해 kotlin-stdlib.jar 파일을 클래스패스에 추가해야 한다.
        
        ```bash
        $ kotlin-jvm Hello.kt -d Hello.jar
        $ java -classpath Hello.jar:$KOTLIN_PATH/lib/kotlin-stdlib.jar HelloKt
        ```
        
    - 환경변수는 코틀린이 설치된 디렉토리를 참조한다. Unix-Like 시스템에서는 환경변수로 $KOTLIN_PATH가 사용되고, 윈도우에서는 %KOTLIN_PATH%가 사용된다. 윈도우에선 클래스 내의 패스들을 구분하기 위해 콜론(:)이 아닌 세미콜론(;)을 사용한다.
- IDE로 실행하기
    - 코틀린에는 특정 IDE가 필요하지 않다. IDE를 사용하지 않아도 상관없다.
- REPL 실험
    
    

# Java 개발자를 위한 코틀린 필수 사항

# 함수를 사용하자

# 외부 반복과 아규먼트 매칭

# 콜렉션 사용하기

# 오류를 예방하는 타입 안정성

# 객체와 클래스

# 클래스 계층과 상속

# 델리케이션을 통한 확장

# 람다를 사용한 함수형 프로그래밍

# 내부 반복과 지연 연산

# 코틀린에서 구현하는 유창성

# 내부 DSL 만들기

# 재귀 프로그래밍과 메모이제이션 프로그래밍

# 코루틴 탐험하기

# 비동기 프로그래밍

# Java와 코틀린 혼용

# 코틀린 유닛 테스트

# 코틀린으로 스프링 사용하기

# 코틀린으로 안드로이드 어플리케이션 만들기